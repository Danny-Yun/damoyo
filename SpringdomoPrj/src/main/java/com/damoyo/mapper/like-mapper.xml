<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.rg/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="com.damoyo.mapper.PhotoLikeMapper">
	<insert id="create">
		insert into photo_like(p_num, u_id)
		values(#{p_num}, #{u_id})
	</insert>
	
	<select id="read" resultType="PhotolikeVO">
		SELECT * FROM photo_like WHERE p_num = #{p_num}
		and u_id = #{u_id}
	</select>
	
	<delete id ="delete">
		delete from photo_like
		where p_num=#{p_num} and u_id = #{u_id}
	</delete>
	
	<update id="update" parameterType="HashMap">
	UPDATE photolike
	SET p_like_num = p_like_num + 1
	WHERE m_num={m_num} and p_num={p_num}
	</update>
	
	<update id="update_cancel" parameterType="HashMap">
	UPDATE photolike
	SET p_like_num=0
	WHERE m_num={m_num} and p_num={p_num}
	</update>
	
</mapper>